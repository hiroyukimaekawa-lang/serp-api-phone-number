# 電話番号抽出アプリ

SerpAPIを使用してGoogle Mapsから店舗を検索し、電話番号をリスト化するPythonアプリケーションです。

## セットアップ

1. 必要なパッケージをインストールします:
```bash
pip install -r requirements.txt
```

2. `.env`ファイルを作成し、SerpAPIのAPIキーを設定します:
```
SERPAPI_KEY=your_api_key_here
```

または既存の`.env`ファイルにAPIキーを追加してください。

## 使用方法

### Streamlitアプリ（推奨）

Streamlitアプリを起動:
```bash
streamlit run app.py
```

#### 主な機能

1. **地名から座標を取得**: 地名や住所を入力すると、自動で座標を取得します
2. **半径指定で検索**: 座標と半径（メートル）を指定して、その範囲内の店舗を検索できます
   - 例: 東京駅から半径1000m以内のコーヒーショップを検索
   - 半径を指定すると、指定した座標からその半径内の店舗のみをフィルタリングして表示します
3. **ズームレベルで検索**: 従来通り、ズームレベルを指定して検索することも可能です
4. **テイクアウト対応店舗のみ表示**: テイクアウトサービスを提供している店舗のみをフィルタリング
5. **CSVダウンロード**: 検索結果をCSV形式でダウンロード可能

#### 半径指定の使い方

1. 「検索範囲の指定方法」で「半径（メートル）で指定」を選択
2. 座標を設定（地名から取得、または直接入力）
3. 検索半径（メートル）を入力（例: 500m, 1000m, 5000m）
4. 検索を実行すると、指定した座標から半径内の店舗のみが表示されます

### コマンドライン版

基本的な使い方:
```bash
python phone_number_extractor.py
```

検索クエリを指定:
```bash
python phone_number_extractor.py "Coffee"
```

検索クエリと場所を指定:
```bash
python phone_number_extractor.py "Coffee" "@40.7455096,-74.0083012,14z"
```

CSV形式で出力:
```bash
python phone_number_extractor.py "Coffee" "@40.7455096,-74.0083012,14z" --csv
```

## 出力形式

- 店舗名、電話番号、住所が表示されます
- 半径指定の場合は、中心座標からの距離（メートル）も表示されます
- 電話番号のみのリストも表示されます
- `--csv`オプションでCSV形式でも出力可能です（コマンドライン版）
- Streamlitアプリでは、タブからCSVダウンロードが可能です

